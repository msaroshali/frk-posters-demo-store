<#import "../layout/defaultLayoutWebShop.ftl.html" as layout>
<@layout.myLayout "The ultimate webshop">
<div>
	<div class="header-container">
		<span class="h2" id="titleCart">${i18n("cartOverviewTitle")}</span>
	</div>
	<#if (0 < cartProducts?size) >
	<table id="cartOverviewTable" class="table">
			<thead class="bgLightGrey">
				<tr>
					<th colspan="1" class="text-left" title="${i18n('cartTableHeaderItem')}"><div class="margin_left5">${i18n("cartTableHeaderItem")}</div></th>
					<th colspan="1" title="${i18n('cartTableHeaderQuantity')}" class="text-left">${i18n("cartTableHeaderQuantity")}</th>
					<th class="text-right" title="${i18n('cartTableHeaderUnitPrice')}">${i18n('cartTableHeaderUnitPrice')}</th>
					<th class="d-none d-sm-block text-right" title="${i18n('cartTableHeaderTotalUnitPrice')}">${i18n('cartTableHeaderTotalUnitPrice')}</th>
				</tr>
			</thead>
			<tbody class="container">
				<#list cartProducts as cartProduct>
				<tr id="product${cartProduct_index}" class="cartOverviewProduct">
							
							<td class="checkoutTable"><a
						href="${contextPath}/productDetail/${cartProduct.product.name?url('UTF-8')}?productId=${cartProduct.product.id}"><img
							data-src="${contextPath}/assets/js/holder.js/150x100"
							title="${cartProduct.product.name}"
							alt="${cartProduct.product.name}"
							src="${contextPath}${cartProduct.product.imageURL}" width="150"/></a>
						
							
												<!--Pdescription not mobile-->
						<div class="d-none d-md-block productDescription">
							<div class="productInfo">
								<div class="productName"><span class="font-bold">${cartProduct.product.name}</span></div>
								<div class="productDescriptionOverview">${cartProduct.product.descriptionOverview}</div>
								<ul class="list-unstyled">
									<li>${i18n("cartStyle")}: <small><span class="productStyle">${cartProduct.finish}</span></small>
									</li>
									<li>${i18n("cartSize")}: <small><span class="productSize">${cartProduct.size.width}
											x ${cartProduct.size.height} ${unitLength}</span></small>
									</li>
									
								</ul>
							</div>
						</div>
<!--Pdescription mobile-->					<div class="d-md-none d-block productDescription">
													<div class="productInfo">
														<div class="productName"><span class="font-bold">${cartProduct.product.name}</span></div>
														<div class="productDescriptionOverview">${cartProduct.product.descriptionOverview}</div>
														<ul class="list-unstyled">
															<li>${i18n("cartStyle")}: <small><span class="productStyle">${cartProduct.finish}</span></small>
															</li>
															<li>${i18n("cartSize")}: <small><span class="productSize">${cartProduct.size.width}
																	x ${cartProduct.size.height} ${unitLength}</span></small>
															</li>
															
														</ul>
													</div>
												</div>
											</td>
											
										
						
						<td>
						
					
								<div class="pull-left list-unstyled">
									<!-- quantity -->
									<div class="form-inline quantity-size">
											<div class="form-group">
												<input id="productCount${cartProduct_index}"
													name="productCount${cartProduct_index}"
													class="quantityCount form-control productCount"
													title="${i18n('cartTableHeaderQuantity')}"								
													type="text" value=${cartProduct.productCount} size="4"
													maxlength="4">
												<button
													id="btnUpdateProdCount${cartProduct_index}"
													class="UpdatePrice btn btn-link btnUpdateProduct"
													name="btnUpdateProdCount${cartProduct_index}"
													title="${i18n('buttonUpdate')}"
													data-id="${cartProduct.id}" data-index="${cartProduct_index}">
													<span class="fa fa-repeat"></span>
												</button>
												<button class="btn btn-link btnRemoveProduct"
													id="btnRemoveProdCount${cartProduct_index}"
													name="btnRemoveProduct${cartProduct_index}"
													title="${i18n('buttonRemove')}" data-id="${cartProduct.id}" data-index="${cartProduct_index}"
													data-toggle="modal" data-target="#deleteProductModal">
													<span class="fa fa-trash"></span>
												</button>
											</div>
										</div></div>
														
														</td>
					
				
				<td class="UnitPriceCol checkoutTable">
					<div class="productUnitPrice UpdatePrice text-right">${currency}<span class="unitPriceShort">${cartProduct.getTotalUnitPriceAsString()}</span>
					</div>	
					<br>
					<b>
					<div class="d-sm-none d-block text-center ProductTotalFont">
							${i18n('cartTableHeaderTotalUnitPriceMobile')}
					</div></b>
					<div class="d-sm-none d-block productTotalUnitPrice text-right">${currency}<span class="totalUnitPriceShort">${cartProduct.getTotalUnitPriceAsString()}</span>
					</div>

				</td>
				<td class="d-none d-sm-block TotalUnitPriceCol checkoutTable">
			
					<div class="productTotalUnitPrice text-right">${currency}<span class="totalUnitPriceShort">${cartProduct.getTotalUnitPriceAsString()}</span>
					</div>				
				
				</td>
			</div>		
				</tr>
				
			</#list>
		</tbody>
	</table>
	<div class="col TableBorderBottom"></div>
	<br>
	<div class="col-xs-12 col-md-4 offset-md-8">
		<ul id="cartSummaryList" class="list-unstyled">
			<li class="header bgLightGrey row">
				<div class="col-xs-12">
					<span class="font-bold">${i18n("cartSummary")}</span>
				</div>
			</li>
			<!-- print sub total price -->
			<li class="bgLightGrey2 row">
				<div class="col-sm-6 pull-left">
					${i18n("checkoutOverviewSubTotal")}:</div>
				<div class="col-sm-6 pull-right">
					<span id="orderSubTotalValue" class="value">${currency}${subOrderTotal}</span>
				</div>

			</li>
			<!-- print shipping price -->
			<li class="bgLightGrey2 row" id="shippingCosts">
				<div class="col-sm-6 pull-left">
					${i18n("checkoutOverviewShippingCosts")}:</div>
				<div class="col-sm-6 pull-right">
					<span id="orderShippingCosts" class="value">${currency}${shippingCosts}</span>
				</div>
			</li>				
			<!-- print tax -->
			<li class="bgLightGrey2 row" id="tax">
				<div class="col-sm-6 pull-left">
					${i18n("checkoutOvervieSubTotalTax")} (${tax}%):</div>
				<div class="col-sm-6 pull-right">
					<span id="orderSubTotalTaxValue" class="value">${currency}${subOrderTotalTax}</span>
				</div>
			</li>
			<li class="bgLightGrey row">
				<div class="col-sm-6 pull-left">
					<span class="font-bold">${i18n("cartOverviewTotalPrice")}:</span>
				</div>
				<div class="col-sm-6 pull-right">
					<span id="orderTotal" class="value font-bold">${currency}${orderTotal}</span>
				</div>
			<li class="row">
				<div class="col-xs-6 text-center">
					<div id="prodPrice" class="text-left">
						<a href="${applUrlHttps}/checkout" id="btnStartCheckout"
						class="btn btn-primary" title="${i18n('cartOverviewStartCheckout')}">${i18n("cartOverviewStartCheckout")}</a>
					</div>
				</div>
			</li>
		</ul>
		
	</div>
	
	<#else>
	<div id="errorCartMessage" class="alert alert-danger">${i18n("infoEmptyCart")}</div>
	</#if>

	<div id="deleteProductModal" class="modal fade" role="dialog">
		<div class="modal-dialog">
				<div class="modal-content">

					<div class="modal-header text-center margin_top7">
						
						<h4 class="col-12 text-center modal-title">Remove Product Confirmation
							<button type="button" class="btn btn-primary close" data-dismiss="modal">&times;</button>
						</h4>
					</div>

					<div class="modal-body">						
					</div>

					<div class="modal-footer">
						<div>
							<button id="buttonClose" type="button" class="btn btn-primary"
								data-dismiss="modal"
								title="${i18n('buttonClose')}">${i18n('buttonClose')}</button>
							<button id="buttonDelete" name="buttonDelete"
								class="btn btn-danger pull-xs-right" data-dismiss="modal"
								title="${i18n('buttonDelete')}">${i18n('buttonDelete')}</button>
						</div>
					</div>

				</div>
		</div>
	</div>


</div>
</@layout.myLayout>